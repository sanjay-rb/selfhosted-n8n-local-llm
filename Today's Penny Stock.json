{
  "name": "Today's Penny Stock",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "a36c3d29-c8a0-4d33-9197-d554ddcd6f3e",
      "name": "When clicking ‚ÄòExecute workflow‚Äô"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Here is the data from SerpAI:\n\n<text_blocks>\n{{ $json.text }}\n</text_blocks>\n\nPlease analyze the above text_blocks and provide **one long-term future-focused Indian penny stock** recommendation in the Telegram-ready format specified by the system prompt.",
        "options": {
          "systemMessage": "=You are a highly intelligent financial research assistant specialized in the Indian stock market. You will receive a JSON output from SerpAI that contains an array of \"text_blocks\". Your task is to analyze that data and choose **the best long‚Äëterm, future-focused penny stock in India** for investment today. **It is critical that the exact stock symbol (Stock ID) from the context is retained and used in your output.**\n\nüîç Requirements:\n\n1. Parse all \"text_blocks\" in the JSON and extract relevant details about companies, including:\n   - Company name and **exact stock symbol / Stock ID** as mentioned in the text\n   - Current share price (if mentioned in text)\n   - Industry / sector\n   - Growth trends, news, analyst insights, or catalysts\n   - Any financials mentioned (revenue growth, profitability signals, etc.)\n   - Positive or negative sentiment\n\n2. Only consider stocks:\n   - Listed on Indian exchanges\n   - Currently trading at typical penny stock levels (generally share price < ‚Çπ100 or described as penny/low‚Äëpriced in text)\n   - With evidence of *long‚Äëterm growth potential* (innovation, emerging sector, strong future narrative)\n\n3. **Do NOT invent or modify stock names, stock symbols, or facts. Only use information from the \"text_blocks\".**  \n\nüéØ Output Format (Telegram‚Äëready):\n\nYour output MUST be formatted exactly as below (use markdown and emojis). **Ensure the stock symbol (Stock ID) matches exactly what is in the source text.**\n\nüìà *Best Penny Stock for Today ‚Äî Indian Market*\n\n*Company:* {Company Name} (`{Stock Symbol}`)  \nüöÄ *Growth Potential:* {growth_potential_summary}  \nüìå *Key Reason:* {reason_for_selection}  \n‚ö†Ô∏è *Key Risks:* {risks_summary}\n\nExample:\n\nüìà *Best Penny Stock for Today ‚Äî Indian Market*\n\n*Company:* Tata Steel (`TATASTEEL`)  \nüöÄ *Growth Potential:* Strong infrastructure growth + cement demand  \nüìå *Key Reason:* Positive trend & future sector demand  \n‚ö†Ô∏è *Key Risks:* Commodity price exposure\n\nMake sure the response is clear, concise, and complies with the format above. **Always retain the exact stock symbol (Stock ID) from the text.**\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1024,
        0
      ],
      "id": "cd7a8de9-3c9a-48fd-a876-c9939607a208",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "chatId": "-5208920992",
        "text": "={{ $json.output }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1376,
        0
      ],
      "id": "d9fc8c01-849f-40c2-b436-53c73a3463b7",
      "name": "Send a text message",
      "webhookId": "4c1b6737-50b6-495d-bae2-38f71a6777be",
      "credentials": {
        "telegramApi": {
          "id": "6jMirS2HbisMots0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are a financial analysis assistant. Your task is to read the financial context provided below and generate a concise, structured summary that can help an investor make informed decisions. **It is critical that you retain and reference the exact stock ID(s) mentioned in the context** wherever relevant. Focus on key insights, trends, opportunities, and risk factors. Highlight actionable recommendations where possible, but maintain a neutral tone.\n\nInput Financial Context:\n\"\"\"\n{{ $json.combinedString }}\n\"\"\"\n\nInstructions:\n1. Summarize the overall market and sector trends.\n2. List the most promising investment opportunities and explain why, **including the exact stock ID(s)** from the context.\n3. Highlight sector-specific growth areas.\n4. Mention key filters or criteria an investor should consider (e.g., revenue growth, debt levels, promoter integrity, liquidity).\n5. Include any potential risks or disclaimers relevant to the investments.\n6. Present the summary in a structured format with headings and bullet points for clarity.\n7. Ensure that any stock references explicitly include the stock ID from the context.\n\nOutput format example:\n\nMarket Overview:\n- [Brief summary of market conditions, sectors with growth potential]\n\nTop Investment Opportunities:\n- [Stock Name (Stock ID)]: [Reason why it‚Äôs attractive]\n\nSector-Specific Opportunities:\n- [Sector Name]: [Key insights or companies with stock IDs]\n\nInvestment Filters:\n- [Filter 1]\n- [Filter 2]\n\nRisks / Disclaimer:\n- [Key risks to be aware of]\n\nProvide the summary in plain text, concise, and easy to read for financial decision-making.\n",
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.9,
      "position": [
        672,
        0
      ],
      "id": "c573e314-24c9-4fe3-80f3-a82e409183d5",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "jsCode": "// Recursive function to extract all text\nfunction extractText(item) {\n  let texts = [];\n\n  // Add snippet if it exists\n  if (item.snippet && typeof item.snippet === \"string\") {\n    texts.push(item.snippet);\n  }\n\n  // If item has a 'list' array, add each element\n  if (Array.isArray(item.list)) {\n    item.list.forEach(el => {\n      if (typeof el === \"string\") {\n        texts.push(el);\n      } else if (typeof el === \"object\" && el !== null) {\n        // Recursive extraction if list contains objects\n        texts = texts.concat(extractText(el));\n      }\n    });\n  }\n\n  return texts;\n}\n\nlet allTexts = [];\n\n// Loop through each item in the workflow\nfor (let item of $input.first().json.text_blocks) {\n  allTexts = allTexts.concat(extractText(item));\n}\n\n// Join everything into a single string (space-separated)\nreturn [{ json: { combinedString: allTexts.join(' ') } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        448,
        0
      ],
      "id": "bd1795d5-f351-4aec-a258-eac9286ada0b",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "model": "llama3.2:3b",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        744,
        224
      ],
      "id": "7f3c7af2-0503-43cf-8ed6-fb873541100e",
      "name": "Ollama Chat Model",
      "credentials": {
        "ollamaApi": {
          "id": "W0UOQpSwzjak8K3I",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "operation": "google_ai_mode",
        "q": "=Top penny stocks to buy in India for long-term investment, including stock names and IDs for {{ $now }}",
        "additionalFields": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-serpapi.serpApi",
      "typeVersion": 1,
      "position": [
        224,
        0
      ],
      "id": "4c438532-971d-4038-b226-c00118ab8a8c",
      "name": "Google_ai_mode search1",
      "credentials": {
        "serpApi": {
          "id": "IjhcqiVmPxQBHVPc",
          "name": "SerpApi account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ollama Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Google_ai_mode search1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google_ai_mode search1": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "4e50bad9-b978-4375-8751-5db3b9e4cd11",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "1e388271122b5c7f6905409ccac37294ee28401e272bdc0dfe03f8a794a96377"
  },
  "id": "DTTEp5fLYPtXYSY4nKOo2",
  "tags": []
}